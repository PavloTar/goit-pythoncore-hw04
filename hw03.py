# –ó–ê–í–î–ê–ù–ù–Ø 3

# –†–æ–∑—Ä–æ–±—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –≤ —è–∫–æ—Å—Ç—ñ –∞—Ä–≥—É–º–µ–Ω—Ç—É –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ —ñ –≤—ñ–∑—É–∞–ª—ñ–∑—É—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ü—ñ—î—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, –≤–∏–≤–æ–¥—è—á–∏ —ñ–º–µ–Ω–∞ –≤—Å—ñ—Ö –ø—ñ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —Ç–∞ —Ñ–∞–π–ª—ñ–≤.
# –î–ª—è –∫—Ä–∞—â–æ–≥–æ –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∏–π–Ω—è—Ç—Ç—è, —ñ–º–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —Ç–∞ —Ñ–∞–π–ª—ñ–≤ –º–∞—é—Ç—å –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è –∑–∞ –∫–æ–ª—å–æ—Ä–æ–º.

from colorama import Fore, init
from pathlib import Path
import sys

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ colorama —Ç–∞ –≤–∫–∞–∑—É—î–º–æ autoreset=True –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Å–∫–∏–¥–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä—ñ–≤
init(autoreset=True)

def display_directory_structure(directory_path, indent=0):
  
    # indent - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤—ñ–¥—Å—Ç—É–ø—É –ø—Ä–∏ –≤–∏–≤–µ–¥–µ–Ω–Ω—ñ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∫–∞—Ç–∞–ª–æ–≥—É –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ, –≤–∫–∞–∑—É—î, –Ω–∞ —Å–∫—ñ–ª—å–∫–∏ –ø—Ä–æ–±—ñ–ª—ñ–≤ –∞–±–æ —Å–∏–º–≤–æ–ª—ñ–≤ —Ç–∞–±—É–ª—è—Ü—ñ—ó —Å–ª—ñ–¥ –≤—ñ–¥—Å—Ç—É–ø–∏—Ç–∏ –ø–µ—Ä–µ–¥ –≤–∏–≤–µ–¥–µ–Ω–Ω—è–º –∫–æ–∂–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ.

    try:
        # –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç Path –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–∫–∞–∑–∞–Ω–æ–≥–æ —à–ª—è—Ö—É
        path = Path(directory_path)

        # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —à–ª—è—Ö —ñ—Å–Ω—É—î —Ç–∞ —î –∫–∞—Ç–∞–ª–æ–≥–æ–º
        if not path.exists() or not path.is_dir():
            # –í–∏–≤–æ–¥–∏–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É, —è–∫—â–æ —à–ª—è—Ö –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
            print(f"{Fore.RED}Error: The specified path is not a valid directory.")
            return

        # –ü—Ä–æ—Ö–æ–¥–∏–º–æ—Å—è –ø–æ –≤—Å—ñ–º –µ–ª–µ–º–µ–Ω—Ç–∞–º –∫–∞—Ç–∞–ª–æ–≥—É
        for item in path.iterdir():
            if item.is_dir():
                # –í–∏–≤–æ–¥–∏–º–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Å–∏–Ω—ñ–º –∫–æ–ª—å–æ—Ä–æ–º —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—î–º–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è —ó—Ö–Ω—å–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ ()
                print(f"{Fore.CYAN}{'  ' * indent}üìÅ {item.name}")
                display_directory_structure(item, indent + 1)
            else:
                # –í–∏–≤–æ–¥–∏–º–æ —Ñ–∞–π–ª–∏ –∑–µ–ª–µ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º
                print(f"{Fore.GREEN}{'  ' * indent}üìú {item.name}")

    except Exception as e:
        # –í–∏–≤–æ–¥–∏–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –±—É–¥—å-—è–∫—É —ñ–Ω—à—É –ø–æ–º–∏–ª–∫—É —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º
        print(f"{Fore.RED}An error occurred: {e}")

if __name__ == "__main__":
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
    if len(sys.argv) != 2:
        # –í–∏–≤–æ–¥–∏–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, —è–∫—â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞
        print(f"{Fore.RED}Usage: python hw03.py /path/to/directory")
    else:
        # –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é display_directory_structure –∑ –ø–µ—Ä–µ–¥–∞–Ω–∏–º —à–ª—è—Ö–æ–º –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É
        directory_path = sys.argv[1]
        display_directory_structure(directory_path)